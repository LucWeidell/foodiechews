import{r as t,a as e,o as a,c as s,b as o,d as n,e as r,f as c,F as i,C as l,S as d,u,g as p,t as g,h as m,i as y,w as v,j as b,p as h,k as f,l as w,m as _,n as R,q as k,s as x,v as S,x as C,y as T,$ as O,z as L,A,B as I,D as P,E}from"./vendor.130de7fe.js";const M=t(!1),j=t(window.innerWidth);window.onresize=function(){j.value=window.innerWidth,j.value<764?M.value=!0:M.value=!1};const D=e({user:{},account:{},activeRestaurant:{},myRestaurants:[],visits:[],activeLocation:{},searchRestsList:[],lastActive:{},loading:!1,locations:{},sixRests:{},allRest:{},allProfiles:{},profileDetails:{},screenSize:j,isMobile:M});const B={name:"App",setup:()=>(a((async()=>{D.isMobile=!0})),{isMobile:s((()=>D.isMobile)),appState:s((()=>D))})},N={class:"my-5 py-2"};B.render=function(t,e,a,s,l,d){const u=o("NavbarMobileTop"),p=o("NavbarDesktopTop"),g=o("router-view"),m=o("NavbarMobileBottom"),y=o("NavbarDesktopBottom");return n(),r(i,null,[c("header",null,[s.isMobile?(n(),r(u,{key:0})):(n(),r(p,{key:1}))]),c("main",N,[c(g)]),c("footer",null,[s.isMobile?(n(),r(m,{key:0})):(n(),r(y,{key:1}))])],64)};const $=window.location.origin.includes("localhost"),V=$?"http://localhost:3000":"",U=l.create({baseURL:V,timeout:1e4});class z{static async confirm(t="Are you sure?",e="You won't be able to revert this!",a="warning",s="Yes, delete it!"){try{return!!(await d.fire({title:t,text:e,icon:a,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:s})).isConfirmed}catch(o){return!1}}static toast(t="Warning!",e="warning",a="top-end",s=3e3,o=!0){d.fire({title:t,icon:e,position:a,timer:s,timerProgressBar:o,toast:!0,showConfirmButton:!1})}}function F(t,e){if($)console[t](`[${t}] :: ${(new Date).toLocaleTimeString()} :: `,...e);else{switch(t){case"log":case"assert":return}console[t](`[${t}] :: ${(new Date).toLocaleTimeString()} :: `,...e)}}const H={log(){F("log",arguments)},error(){F("error",arguments)},warn(){F("warn",arguments)},assert(){F("assert",arguments)},trace(){F("trace",arguments)}};const Y=new class{async getByYelpId(t,e){console.log("getyelpbyid",e),D.loading=!0;let a=!1,s={};try{let o="",n="";if(e.city&&e.state){switch(o=e.city.replace(" ",""),n=e.state.replace(" ",""),t){case"random":s=D.account.id?await U.get(`/api/yelpRestaurants/random?location=${o+n}&open_now=${D.account.showOnlyOpen}`):await U.get(`/api/yelpRestaurants/random?location=${o+n}&open_now=true`),D.activeRestaurant=s.data,D.loading=!1;break;case"search":s=e.price&&e.categories?await U.get(`/api/yelpRestaurants/search?categories=${e.categories}&price=${e.price}&location=${o+n}&open_now=${D.account.showOnlyOpen}`):e.categories?await U.get(`/api/yelpRestaurants/search?categories=${e.categories}&location=${o+n}&open_now=${D.account.showOnlyOpen}`):e.price?await U.get(`/api/yelpRestaurants/search?price=${e.price}&location=${o+n}&open_now=${D.account.showOnlyOpen}`):await U.get(`/api/yelpRestaurants/search?location=${o+n}&open_now=${D.account.showOnlyOpen}`),a=!0;break;default:s=await U.get(`/api/yelpRestaurants/${t}`)}a?D.searchRestsList=s.data:D.activeRestaurant=s.data}return D.loading=!1,s.data}catch(o){z.toast(o,"error")}}async getByCoordinates(t){try{const e=await U.get(`/api/yelpRestaurants/random?latitude=${t.lat}&longitude=${t.long}`),a=e.data.location.city,s=e.data.location.state;return D.activeLocation={city:a,state:s},{city:a,state:s}}catch(e){z.toast(e,"error")}}async setMyCache(){try{const t=await U.delete("/api/yelpRestaurants");H.log(t)}catch(t){z.toast("Failed to set the cache:"+t,"error")}}};const q=new class{async getAll(t){const e={city:t.city.replace(" ",""),state:t.state.replace(" ","")};return(await U.get("/api/totalCityRests"+function(t){let e="?";for(const a in t)e+=a+"="+t[a]+"&";return e=e.substring(0,e.length-1),e}(e))).data}};const W=new class{async getAccount(){try{const t=await U.get("/account");D.account=t.data,H.log("active location:",t.data.activeLocation),t.data.activeLocation?Object.assign(D.lastActive,t.data.activeLocation):(Object.assign(D.lastActive,{city:"",state:""}),await this.addCity(D.activeLocation))}catch(t){H.error("HAVE YOU STARTED YOUR SERVER YET???",t)}}async editAccount(t){try{H.log("This is your RawAccount",t);const e=await U.put("/account/"+t.id,t);H.log("This is the account after edit:",e.data),D.account=e.data}catch(e){H.error("Failed Account Edit",e)}}async addCity(t){if(t.city!==D.lastActive.city||t.state!==D.lastActive.state){if(await async function(t){try{const e=await q.getAll(t);return H.log(e),e?0!==e.totalNum||(H.log("IM In totlNUM"),!1):(H.log("IM IN UNDEFINED"),!1)}catch(e){return!1}}(t)){D.account.location.find((e=>t.city===e.city&&t.state===e.state))||D.account.location.push(t),D.lastActive=t,D.account.activeLocation=t;const e=await U.put("/account/"+D.account.id,D.account);return D.account=e.data,!!e.data}return!1}return!0}async removeCity(t){const e=D.account.activeLocation;D.account.location=D.account.location.filter((e=>!(e.city===t.city&&e.state===t.state))),t.city===e.city&&t.state===e.state&&(H.log("In the if:",D.account.location),D.account.activeLocation=D.account.location[0],D.lastActive=D.account.activeLocation),H.log("Past the if:",D.account.location);const a=await U.put("/account/"+D.account.id,D.account);return D.account=a.data,!!a.data}async getAllMyRestaurants(){try{const t=await U.get("api/profiles/"+D.account.id+"/myRestaurants");D.myRestaurants=t.data}catch(t){H.log(t)}}},G={setup(){const t=u(),e=p();return{matchedRestaurant:s((()=>!!D.myRestaurants.find((t=>t.yelpId===D.activeRestaurant.id)))),async getRandom(){"random"!==t.params.yelpId&&e.push({name:"RestaurantsDetails",params:{id:D.account.id,yelpId:"random"}});try{let e={};e=D.account.id?await Y.getByYelpId(t.params.yelpId,D.account.activeLocation):await Y.getByYelpId(t.params.yelpId,D.activeLocation),e||z.toast("BRG Comp failed to get restaurant:","error")}catch(a){z.toast("BRG comp failed to get yelpRest: "+a,"error")}},async going(){const t={pendingRestaurant:{yelpId:D.activeRestaurant.id,exists:!0}};try{W.editAccount(t)}catch(e){z.toast(e+"That didn't work :(","error")}}}}},K={class:"col-sm-4 d-flex justify-content-center mt-3 mb-sm-5"},Z=c("h5",{class:"pt-1"}," I've Been 👍 ",-1),J={class:"col-sm-4 d-flex justify-content-center mt-3 mb-sm-5"},Q=c("h5",{class:"pt-1"}," Re-Roll 🎲 ",-1),X={class:"col-sm-4 d-flex justify-content-center mt-3 mb-5"},tt=c("h5",{class:"pt-1"}," I'm Going 🏃‍♂️ ",-1);G.render=function(t,e,a,s,l,d){const u=o("VisitModal");return n(),r(i,null,[c(u),c("div",K,[c("button",{type:"button",class:["btn-sm btn-secondary",{disabled:s.matchedRestaurant}],onClick:e[1]||(e[1]=(...e)=>t.addToMyRestaurants&&t.addToMyRestaurants(...e)),disabled:s.matchedRestaurant,"data-toggle":"modal","data-target":"#staticBackdrop"},[Z],10,["disabled"])]),c("div",J,[c("button",{type:"button",class:"btn-sm btn-secondary px-3",onClick:e[2]||(e[2]=(...t)=>s.getRandom&&s.getRandom(...t))},[Q])]),c("div",X,[c("button",{type:"button",class:"btn-sm btn-secondary",onClick:e[3]||(e[3]=(...t)=>s.going&&s.going(...t))},[tt])])],64)};var et=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:G});const at={props:{cityrestaurant:{type:Object,required:!0}},setup:t=>({state:e({account:s((()=>D.account))}),myRests:s((()=>D.sixRests.filter((e=>e.location.city===t.cityrestaurant.location.city&&e.location.state===t.cityrestaurant.location.state))))})},st={class:"row justify-content-center"},ot={class:"col-md-11 col-11"},nt={class:"pt-1"},rt={key:0};at.render=function(t,e,a,s,l,d){const u=o("FeedRestaurantCard");return n(),r("div",st,[c("div",ot,[c("h4",nt,g(a.cityrestaurant.location.city),1),!0===s.state.account.showRestaurants?(n(),r("p",rt,[(n(!0),r(i,null,m(s.myRests,(t=>(n(),r(u,{key:t.id,myrest:t},null,8,["myrest"])))),128))])):y("",!0)])])};var ct=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:at});const it={props:{myrest:{type:Object,required:!0}},setup:()=>({state:e({account:s((()=>D.account))})})},lt={class:"row justify-content-center"},dt={class:"col-md-11 col-11"},ut=b(" ◾ ");it.render=function(t,e,a,s,i,l){const d=o("router-link");return n(),r("div",lt,[c("div",dt,[c("b",null,[ut,c(d,{to:{name:"RestaurantsDetails",params:{id:s.state.account.id,yelpId:a.myrest.yelpId}}},{default:v((()=>[b(g(a.myrest.name),1)])),_:1},8,["to"])])])])};var pt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:it});const gt={},mt=w("data-v-74a827c8");h("data-v-74a827c8");const yt={class:"container-fluid"},vt=c("div",{class:"row justify-content-center align-items-center",style:{"min-height":"80vh"}},[c("div",{class:"col-6 text-center"},[c("div",{class:"lds-ring"},[c("div"),c("div"),c("div"),c("div")]),c("h2",null,"Loading results..."),c("small",null,[b("Powered By "),c("img",{src:"/assets/yelp_logo.67f56e34.svg",class:"yelp",alt:"yelp logo"})])])],-1);f();const bt=mt(((t,e)=>(n(),r("div",yt,[vt]))));gt.render=bt,gt.__scopeId="data-v-74a827c8";var ht=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:gt});const ft={props:{location:{type:Object,required:!0}},setup:t=>({state:e({seeMore:!1,account:s((()=>D.account))}),sixRestaurants:s((()=>D.profileDetails.filter((e=>e.location.city===t.location.location.city&&e.location.state===t.location.location.state)).slice(0,6))),allRestaurants:s((()=>D.profileDetails.filter((e=>e.location.city===t.location.location.city&&e.location.state===t.location.location.state))))})},wt={class:"row justify-content-center my-5"},_t={class:"card bg-blueish col-md-6 col-10"},Rt={class:"card-header p-1"},kt={class:"row justify-content-center"},xt={class:"col-md-6 col-6 text-center mt-2"},St={class:"text-light"},Ct={class:"card-body p-2 bg-blueish"},Tt={key:0,class:"row justify-content-center"},Ot={class:"class card-footer p-1 bg-blueish border-primary text-light text-center"};ft.render=function(t,e,a,s,l,d){const u=o("RestaurantShortCard");return n(),r("div",wt,[c("div",_t,[c("div",Rt,[c("div",kt,[c("div",xt,[c("h5",St,g(a.location.location.city)+", "+g(a.location.location.state),1)])])]),c("div",Ct,[!0===s.state.account.showRestaurants?(n(),r("div",Tt,[(n(!0),r(i,null,m(s.state.seeMore?s.allRestaurants:s.sixRestaurants,(t=>(n(),r(u,{key:t.id,restaurant:t},null,8,["restaurant"])))),128))])):y("",!0)]),c("div",Ot,[s.allRestaurants>s.sixRestaurants?(n(),r("p",{key:0,class:"hoverable",onClick:e[1]||(e[1]=t=>s.state.seeMore=!s.state.seeMore)},g(s.state.seeMore?"Hide":"See More..."),1)):y("",!0)])])])};var Lt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ft});const At=new class{async addNew(t){console.log("visit service raw visit",t);try{const e=await U.post("api/visits",t);console.log(e.data),z.toast("success","success")}catch(e){z.toast(e,"error")}}async getVisitsByMyRestaurantId(t){try{const e=await U.get("api/myRestaurants/"+t+"/visits");console.log(e.data),D.visits=e.data}catch(e){z.toast(e,"error")}}};const It=new class{async addNew(t,e){try{const a={yelpId:t.id,name:t.name,location:{city:t.location.city,state:t.location.state},tag:e[0]};console.log("my rest:",a);const s=await U.post("api/myRestaurants",a);return D.myRestaurants.push(s.data),console.log("test success",s.data),s.data.id}catch(a){z.toast(a,"error")}}async changeFavorite(t,e){const a=e?"none":"favorite";try{return(await U.put("api/myRestaurants/"+t,{tag:a})).data}catch(s){z.toast(s,"error")}}};const Pt={setup(){const t=u(),a=e({myRestaurant:{},favorite:s((()=>"favorite"===a.myRestaurant.tag))});return _((async()=>{if(0!==D.myRestaurants.length){const e=D.myRestaurants.find((e=>e.yelpId===t.params.yelpId));a.myRestaurant=e,await At.getVisitsByMyRestaurantId(e.id)}})),{state:a,visits:s((()=>D.visits)),async changeFavorite(){const e=await It.changeFavorite(t.params.yelpId,a.favorite);a.myRestaurant=e}}}},Et=w("data-v-bd41b966");h("data-v-bd41b966");const Mt={class:"card"},jt={key:0,class:"div"},Dt=c("em",null,"No Review Yet",-1),Bt={key:1};f();const Nt=Et(((t,e,a,s,o,l)=>(n(),r("div",Mt,[c("h1",null,[c("span",{onClick:e[1]||(e[1]=(...t)=>s.changeFavorite&&s.changeFavorite(...t)),class:["action star","none"===s.state.myRestaurant.tag?"mdi mdi-star-outline":"mdi mdi-star"],title:"Favorited"},null,2),0===s.visits.length?(n(),r("div",jt,[Dt])):(n(),r("div",Bt,[(n(!0),r(i,null,m(s.visits,(t=>(n(),r("p",{key:t.id},g(0===t.review.length?"Leave a review":t.review),1)))),128))]))])]))));Pt.render=Nt,Pt.__scopeId="data-v-bd41b966";var $t=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Pt});const Vt={setup:()=>({state:e({account:s((()=>D.account))})})},Ut=w("data-v-678cedfe");h("data-v-678cedfe");const zt={class:"d-flex flex-row bg-primary fixed-bottom text-light text-center align-items-center m-0"},Ft={class:"text-center col-2"},Ht=b(" Powered By: "),Yt=c("img",{src:"/assets/yelp-dark.56fc9958.png",class:"mb-2",alt:"yelp-logo"},null,-1),qt={class:"col-6 py-1 push-left",title:"Home"},Wt=c("img",{src:"/assets/Home.1b19cc81.png",class:"pb-1",alt:"Home Button",width:"50"},null,-1),Gt={class:"col-3 nav-item",title:"About"},Kt=b(" About ");f();const Zt=Ut(((t,e,a,s,i,l)=>{const d=o("router-link");return n(),r("div",zt,[c("div",Ft,[c(d,{to:{url:"https://www.yelp.com/"},class:"nav-link text-light align-items-center",title:"Yelp Website"},{default:Ut((()=>[Ht,Yt])),_:1},8,["to"])]),c("div",qt,[c(d,{to:{name:"FeedPage",params:{id:s.state.account.id}}},{default:Ut((()=>[Wt])),_:1},8,["to"])]),c("div",Gt,[c(d,{to:{name:"About"},class:"nav-link text-light"},{default:Ut((()=>[Kt])),_:1})])])}));Vt.render=Zt,Vt.__scopeId="data-v-678cedfe";var Jt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Vt});let Qt;const Xt={},te=function(t,e){if(!e||0===e.length)return t();if(void 0===Qt){const t=document.createElement("link").relList;Qt=t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(e.map((t=>{if(t in Xt)return;Xt[t]=!0;const e=t.endsWith(".css"),a=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${a}`))return;const s=document.createElement("link");return s.rel=e?"stylesheet":Qt,e||(s.as="script",s.crossOrigin=""),s.href=t,document.head.appendChild(s),e?new Promise(((t,e)=>{s.addEventListener("load",t),s.addEventListener("error",e)})):void 0}))).then((()=>t()))};function ee(t){return()=>function(t){switch(t){case"./pages/AccountPage.vue":return te((()=>import("./AccountPage.e76fc1a1.js")),["/assets/AccountPage.e76fc1a1.js","/assets/AccountPage.cd10b552.css","/assets/vendor.130de7fe.js"]);case"./pages/FeedPage.vue":return te((()=>import("./FeedPage.c056f583.js")),["/assets/FeedPage.c056f583.js","/assets/FeedPage.505caffd.css","/assets/vendor.130de7fe.js"]);case"./pages/HomePage.vue":return te((()=>import("./HomePage.f8a56461.js")),["/assets/HomePage.f8a56461.js","/assets/HomePage.ba540ef4.css","/assets/vendor.130de7fe.js","/assets/LocationGetter.24b4704d.js"]);case"./pages/ProfilePage.vue":return te((()=>import("./ProfilePage.bad376f1.js")),["/assets/ProfilePage.bad376f1.js","/assets/ProfilePage.430bfce5.css","/assets/vendor.130de7fe.js"]);case"./pages/RestaurantDetailsPage.vue":return te((()=>import("./RestaurantDetailsPage.2f63c443.js")),["/assets/RestaurantDetailsPage.2f63c443.js","/assets/RestaurantDetailsPage.e2540903.css","/assets/vendor.130de7fe.js","/assets/LocationGetter.24b4704d.js"]);case"./pages/SearchPage.vue":return te((()=>import("./SearchPage.3d2812e2.js")),["/assets/SearchPage.3d2812e2.js","/assets/SearchPage.64e00c3d.css","/assets/vendor.130de7fe.js"]);case"./pages/SettingsPage.vue":return te((()=>import("./SettingsPage.6651b91d.js")),["/assets/SettingsPage.6651b91d.js","/assets/SettingsPage.f7b5817f.css","/assets/vendor.130de7fe.js"]);default:return Promise.reject(new Error("Unknown variable dynamic import: "+t))}}(`./pages/${t}.vue`)}const ae=[{path:"/",name:"Home",component:ee("HomePage"),beforeEnter:x},{path:"/profile/:id/myRestaurants",name:"FeedPage",component:ee("FeedPage"),beforeEnter:S},{path:"/profile/:id/restaurantDetails/:yelpId",name:"RestaurantsDetails",component:ee("RestaurantDetailsPage"),beforeEnter:x},{path:"/profile/:id/search",name:"SearchPage",component:ee("SearchPage"),beforeEnter:S},{path:"/about",name:"About",component:ee("HomePage")},{path:"/profile/:id",name:"Profile",component:ee("ProfilePage"),beforeEnter:S},{path:"/account",name:"Account",component:ee("AccountPage"),beforeEnter:S},{path:"/settings",name:"Settings",component:ee("SettingsPage"),beforeEnter:S}],se=R({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:k(),routes:ae});let oe=!1,ne=[];const re="connected",ce="authenticate",ie="authenticated",le="error";const de=new class extends class{constructor(t=V){this.socket=C(t||V),this.on(re,this.onConnected).on(ie,this.onAuthenticated).on(le,this.onError)}on(t,e){return this.socket.on(t,e.bind(this)),this}onConnected(t){H.log("[SOCKET_CONNECTION]",t),oe=!0}onAuthenticated(t){H.log("[SOCKET_AUTHENTICATED]",t);const e=[...ne];ne=[],e.forEach((t=>{this.emit(t.action,t.payload)}))}authenticate(t){this.socket.emit(ce,t)}onError(t){H.error("[SOCKET_ERROR]",t)}emit(t,e){if(!oe)return H.log("[ENQUEING_ACTION]",{action:t,payload:e}),ne.push({action:t,payload:e});this.socket.emit(t,e)}}{constructor(){super(),this.on("error",this.onError)}onError(t){H.error("[SOCKET_ERROR]",t),z.toast(t.message,"error")}},ue=T({domain:"dev-4ed7g57f.us.auth0.com",clientId:"a3SsgvPnbZmiSPlywfZpTJTnoB27EWuv",audience:"https://foodie-chews.com",useRefreshTokens:!0,onRedirectCallback:t=>{se.push(t&&t.targetUrl?t.targetUrl:window.location.pathname)}});async function pe(t){if(!ue.isAuthenticated)return t;const e=1e3*ue.identity.exp,a=e<Date.now(),s=e<Date.now()+432e5;return a?await ue.loginWithPopup():s&&(await ue.getTokenSilently(),U.defaults.headers.authorization=ue.bearer,de.authenticate(ue.bearer)),t}ue.on(ue.AUTH_EVENTS.AUTHENTICATED,(async function(){U.defaults.headers.authorization=ue.bearer,U.interceptors.request.use(pe),D.user=ue.user,await W.getAccount(),de.authenticate(ue.bearer),await W.getAllMyRestaurants(),await Y.setMyCache(),"Home"===se.currentRoute.value.name&&(H.log(D.account.id),se.push({name:"FeedPage",params:{id:D.account.id}}))}));const ge={name:"NavbarDesktop",setup:()=>({state:e({dropOpen:!1,account:s((()=>D.account)),nonLoggedLoc:s((()=>D.activeLocation))}),user:s((()=>D.user)),accounts:s((()=>D.account)),async login(){ue.loginWithPopup()},async logout(){ue.logout({returnTo:window.location.origin})}}),components:{}},me=w("data-v-0912031e");h("data-v-0912031e");const ye={class:"NavBarDesktop navbar navbar-expand-lg navbar-dark fixed-top bg-primary"},ve={class:" col-3 hoverable"},be={key:0},he={class:"btn-group"},fe={type:"button",class:"btn-secondary dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",title:"Change Location"},we={class:"dropdown-menu"},_e={key:1},Re=c("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},[c("span",{class:"navbar-toggler-icon justify-content-center"})],-1),ke={class:"col-1 py-1 border-right border-left border-dark push-left"},xe=c("img",{src:"/assets/randomRed.21b21390.png",class:"p-0 action",alt:"Random Button",title:"Random Restaurant",width:"50"},null,-1),Se={class:"col-2 navbar-text hoverable push-left"},Ce={key:1,class:"dropdown"},Te={class:"mx-3"},Oe=c("div",{class:"list-group-item list-group-item-action hoverable",title:"Settings"}," Settings ",-1);f();const Le=me(((t,e,a,s,l,d)=>{const u=o("UserCities"),p=o("router-link");return n(),r("nav",ye,[c("div",ve,[s.state.account.activeLocation?(n(),r("div",be,[c("div",he,[c("button",fe,g(s.state.account.activeLocation.city)+", "+g(s.state.account.activeLocation.state),1),c("div",we,[(n(!0),r(i,null,m(s.state.account.location,(t=>(n(),r(u,{key:t,loc:t},null,8,["loc"])))),128))])])])):(n(),r("div",_e,g(s.state.nonLoggedLoc.city)+", "+g(s.state.nonLoggedLoc.state),1))]),Re,c("div",ke,[c(p,{to:{name:"RestaurantsDetails",params:{id:s.state.account.id,yelpId:"random"}}},{default:me((()=>[xe])),_:1},8,["to"])]),c("span",Se,[s.user.isAuthenticated?(n(),r("div",Ce,[c("div",{class:"dropdown-toggle",onClick:e[2]||(e[2]=t=>s.state.dropOpen=!s.state.dropOpen)},[c("img",{src:s.user.picture,alt:"user photo"},null,8,["src"]),c("span",Te,g(s.user.name),1)]),c("div",{class:["dropdown-menu p-0 list-group w-100",{show:s.state.dropOpen}],onClick:e[4]||(e[4]=t=>s.state.dropOpen=!1)},[c(p,{to:{name:"Settings"}},{default:me((()=>[Oe])),_:1}),c("div",{class:"list-group-item list-group-item-action hoverable",onClick:e[3]||(e[3]=(...t)=>s.logout&&s.logout(...t)),title:"Logout"}," logout ")],2)])):(n(),r("button",{key:0,class:"btn btn-outline-light text-uppercase",onClick:e[1]||(e[1]=(...t)=>s.login&&s.login(...t)),title:"Login"}," Login "))])])}));ge.render=Le,ge.__scopeId="data-v-0912031e";var Ae=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ge});const Ie={setup:()=>({state:e({account:s((()=>D.account))})})},Pe=w("data-v-c53d26b6");h("data-v-c53d26b6");const Ee={class:"d-flex flex-row bg-primary fixed-bottom text-light text-center align-items-center m-0"},Me={class:"col-4 py-1"},je=c("img",{src:"/assets/search.8027d6aa.png",class:"p-0 action",alt:"Search Button",width:"50"},null,-1),De={class:"col-4 py-1 border-right border-left border-dark"},Be=c("img",{src:"/assets/randomRed.21b21390.png",class:"p-0 action",alt:"Random Button",width:"50"},null,-1),Ne={class:"col-4 py-1"},$e=c("img",{src:"/assets/Home.1b19cc81.png",class:"pb-1",alt:"Home Button",width:"50"},null,-1);f();const Ve=Pe(((t,e,a,s,i,l)=>{const d=o("router-link");return n(),r("div",Ee,[c("div",Me,[c(d,{to:{name:"SearchPage",params:{id:s.state.account.id}}},{default:Pe((()=>[je])),_:1},8,["to"])]),c("div",De,[c(d,{to:{name:"RestaurantsDetails",params:{id:s.state.account.id,yelpId:"random"}}},{default:Pe((()=>[Be])),_:1},8,["to"])]),c("div",Ne,[c(d,{to:{name:"FeedPage",params:{id:s.state.account.id}}},{default:Pe((()=>[$e])),_:1},8,["to"])])])}));Ie.render=Ve,Ie.__scopeId="data-v-c53d26b6";var Ue=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ie});const ze={setup:()=>({state:e({dropOpen:!1,account:s((()=>D.account)),nonLoggedLoc:s((()=>D.activeLocation)),lastActLoc:s((()=>D.lastActive))}),user:s((()=>D.user)),accounts:s((()=>D.account)),async login(){ue.loginWithPopup()},async logout(){ue.logout({returnTo:window.location.origin})}})},Fe=w("data-v-16e50d82");h("data-v-16e50d82");const He={class:"navbar navbar-expand-lg navbar-dark fixed-top bg-primary justify-content-between"},Ye={class:"text-center col-2"},qe=c("img",{src:"/assets/foodieLogo.e323e244.png",alt:"foodie-logo"},null,-1),We={class:"text-center col-8 hoverable"},Ge={key:0},Ke={class:"btn-group"},Ze={type:"button",class:"btn-secondary dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},Je={class:"dropdown-menu"},Qe={key:1},Xe=c("button",{class:"navbar-toggler col-2",type:"button","data-toggle":"collapse","data-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},[c("span",{class:"navbar-toggler-icon"})],-1),ta={class:"collapse navbar-collapse",id:"navbarText"},ea={class:"navbar-nav mr-auto"},aa={class:"nav-item"},sa=b(" About "),oa={class:"nav-item"},na=b(" My Profile "),ra={class:"navbar-text"},ca={key:1,class:"dropdown"},ia={class:"mx-3"},la=c("div",{class:"list-group-item list-group-item-action hoverable"}," Profile ",-1),da=c("div",{class:"list-group-item list-group-item-action hoverable"}," Settings ",-1);f();const ua=Fe(((t,e,a,s,l,d)=>{const u=o("router-link"),p=o("UserCities");return n(),r("nav",He,[c("div",Ye,[c(u,{to:{name:"About"},class:"nav-link"},{default:Fe((()=>[qe])),_:1})]),c("div",We,[s.state.lastActLoc?(n(),r("div",Ge,[c("div",Ke,[c("button",Ze,g(s.state.lastActLoc.city)+", "+g(s.state.lastActLoc.state),1),c("div",Je,[(n(!0),r(i,null,m(s.state.account.location,(t=>(n(),r(p,{key:t,loc:t},null,8,["loc"])))),128))])])])):(n(),r("div",Qe,g(s.state.nonLoggedLoc.city)+", "+g(s.state.nonLoggedLoc.state),1))]),Xe,c("div",ta,[c("ul",ea,[c("li",aa,[c(u,{to:{name:"About"},class:"nav-link"},{default:Fe((()=>[sa])),_:1})]),c("li",oa,[c(u,{to:{name:"Profile",params:{id:s.accounts.id}},class:"nav-link"},{default:Fe((()=>[na])),_:1},8,["to"])])]),c("span",ra,[s.user.isAuthenticated?(n(),r("div",ca,[c("div",{class:"dropdown-toggle",onClick:e[2]||(e[2]=t=>s.state.dropOpen=!s.state.dropOpen)},[c("img",{src:s.user.picture,alt:"user photo"},null,8,["src"]),c("span",ia,g(s.user.name),1)]),c("div",{class:["dropdown-menu p-0 list-group w-100",{show:s.state.dropOpen}],onClick:e[4]||(e[4]=t=>s.state.dropOpen=!1)},[c(u,{to:{name:"Profile",params:{id:s.accounts.id}}},{default:Fe((()=>[la])),_:1},8,["to"]),c(u,{to:{name:"Settings"}},{default:Fe((()=>[da])),_:1}),c("div",{class:"list-group-item list-group-item-action hoverable",onClick:e[3]||(e[3]=(...t)=>s.logout&&s.logout(...t))}," logout ")],2)])):(n(),r("button",{key:0,class:"btn btn-outline-light text-uppercase",onClick:e[1]||(e[1]=(...t)=>s.login&&s.login(...t))}," Login "))])])])}));ze.render=ua,ze.__scopeId="data-v-16e50d82";var pa=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ze});const ga=new class{getStars(t){let e="";switch(t){case 1:e="./src/assets/yelp/yelp_stars/regular/regular_1.png";break;case 1.5:e="./src/assets/yelp/yelp_stars/regular/regular_1_half.png";break;case 2:e="./src/assets/yelp/yelp_stars/regular/regular_2.png";break;case 2.5:e="./src/assets/yelp/yelp_stars/regular/regular_2_half.png";break;case 3:e="./src/assets/yelp/yelp_stars/regular/regular_3.png";break;case 3.5:e="./src/assets/yelp/yelp_stars/regular/regular_3_half.png";break;case 4:e="./src/assets/yelp/yelp_stars/regular/regular_4.png";break;case 4.5:e="./src/assets/yelp/yelp_stars/regular/regular_4_half.png";break;case 5:e="./src/assets/yelp/yelp_stars/regular/regular_5.png";break;default:e="./src/assets/yelp/yelp_stars/regular/regular_0.png"}return e}};const ma={name:"RestaurantDetailsCard",props:{restaurant:{type:Object,required:!0}},setup(t){H.log(t),H.log(t.restaurant);const e=u();let a=!1;function o(t){let e="";e=t<1200?"AM":"PM",t>1299&&(t-=1200);const a=t.toString().substr(-2);let s="";s=t>999?t.toString().substr(0,2):t.toString()[0];let o=`${s}:${a} ${e}`;return"0:00 AM"===o&&(o="Midnight"),o}return _((()=>{D.myRestaurants.find((e=>e.yelpId===t.restaurant.id))&&(a=!0)})),{isInMyRest:a,yelpId:s((()=>e.params.yelpId)),address:s((()=>t.restaurant.location.display_address[0]+" "+t.restaurant.location.display_address[1])),categories:s((()=>t.restaurant.categories)),delivery:s((()=>(H.log("I got to TRANS this:",t.restaurant.transactions),t.restaurant.transactions))),rating:s((()=>ga.getStars(t.restaurant.rating))),fixUnderscores:t=>t.replace("_"," "),getTodayYelp(){let t=(new Date).getDay();return 0===t?t=6:t-=1,t},fixLayout(t){const e=t.hours[0].open.find((t=>t.day===this.getTodayYelp()));if(!e)return{open:"Not Open",close:"Not Open"};return{open:o(e.start),close:o(e.end)}}}}},ya=w("data-v-5f240379");h("data-v-5f240379");const va={class:"row justify-content-center mt-3 text-dark"},ba={class:"col-md-11 col-11"},ha={class:"col-10 d-flex justify-content-center"},fa={class:"col-md-11 col-11 mt-3"},wa=c("h5",null,"Details:",-1),_a={class:"row pl-3"},Ra={class:"col-md-12 col-12 mt-3"},ka={class:"row py-1"},xa=c("div",{class:"col-auto m-1 pt-1"},[c("h5",null,"Categories: ")],-1),Sa={class:"text-light pt-1"},Ca=b("Rating: "),Ta={key:0,class:"row py-1"},Oa=c("div",{class:"col-auto"},[c("h5",null,"Delivery Choice: ")],-1),La={class:"text-light m-1"},Aa={key:1,class:"row py-1"},Ia={class:"col-auto"},Pa=c("img",{src:"/assets/yelp_logo.67f56e34.svg",class:"yelp",alt:"yelp logo"},null,-1),Ea={class:""},Ma=c("div",{class:"col-md-11 col-11 mt-3"},[c("h5",null,"Hours:")],-1),ja={class:"col-md-10 col-9 mt-3 d-flex justify-content-center"},Da={class:"col-lg-6 py-2"},Ba={key:0,class:"row justify-content-between"},Na={key:1};f();const $a=ya(((t,e,a,s,l,d)=>{const u=o("BRGbuttons"),p=o("MyInfoCard");return n(),r("div",va,[c("div",ba,[c("h4",null,g(a.restaurant.name),1)]),c("div",ha,[c("img",{src:a.restaurant.image_url||"src/assets/img/empty-plate.jpg",alt:"restaurant-image",class:"shadow img-main rounded"},null,8,["src"])]),c("div",fa,[wa,c("div",_a,[c("div",Ra,[c("div",ka,[xa,(n(!0),r(i,null,m(s.categories,(t=>(n(),r("div",{class:"col-auto card bg-bootSec mx-1 mb-1 pt-1",key:t.title},[c("h6",Sa,g(t.title),1)])))),128))]),c("h5",null,"Address: "+g(s.address),1),c("h5",null,"Price: "+g(a.restaurant.price),1),c("h5",null,[Ca,c("span",null,[c("img",{src:s.rating,alt:"Unable to retrieve rating.",title:a.restaurant.rating+" Stars"},null,8,["src","title"])])]),s.delivery.length>0?(n(),r("div",Ta,[Oa,(n(!0),r(i,null,m(s.delivery,(t=>(n(),r("div",{class:"col-auto card bg-bootSec m-1",key:t},[c("h6",La,g(s.fixUnderscores(t)),1)])))),128))])):y("",!0),a.restaurant.url?(n(),r("div",Aa,[c("div",Ia,[c("h5",null,[c("a",{class:" text-blue d-flex align-items-end",href:a.restaurant.url,target:"_blank",title:a.restaurant.name+" Yelp Page"},[Pa,c("small",Ea,[c("b",null,g(a.restaurant.name),1)])],8,["href","title"])])])])):y("",!0)])])]),Ma,c("div",ja,[c("p",null,g(s.fixLayout(a.restaurant).open)+" - "+g(s.fixLayout(a.restaurant).close),1)]),c("div",Da,[s.isInMyRest?(n(),r("span",Na,[c(p)])):(n(),r("div",Ba,[c(u)]))])])}));ma.render=$a,ma.__scopeId="data-v-5f240379";var Va=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ma});const Ua={props:{restaurant:{type:Object,required:!0}},setup(t){H.log("my prop in Rest search: ",t.restaurant);return{state:e({account:s((()=>D.account))}),rating:s((()=>ga.getStars(t.restaurant.rating))),address:s((()=>t.restaurant.location.display_address[0]))}}},za={class:"col-12 bg-light mb-3 rounded pt-2"},Fa={class:"row justify-content-md-between"},Ha={class:"col-md-6 col-7"},Ya={class:"col-2 d-flex align-items-center pt-1"},qa=b("Rating: ");Ua.render=function(t,e,a,s,i,l){const d=o("router-link");return n(),r("div",za,[c(d,{to:{name:"RestaurantsDetails",params:{id:s.state.account.id,yelpId:a.restaurant.id}}},{default:v((()=>[c("div",Fa,[c("div",Ha,[c("b",null,g(a.restaurant.name),1),c("p",null,g(s.address),1)]),c("div",Ya,[c("h6",null,[qa,c("span",null,[c("img",{src:s.rating,alt:"Unable to retrieve rating.",title:a.restaurant.rating+" Stars"},null,8,["src","title"])])])])])])),_:1},8,["to"])])};var Wa=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ua});const Ga={props:{restaurant:{type:Object,required:!0}},setup:()=>({state:e({account:s((()=>D.account))})})},Ka={class:"col-md-11 col-12 bg-light mb-3 rounded"},Za={class:"row justify-content-md-between"},Ja={class:"col-md-6 col-10"},Qa={class:"text-dark"},Xa={class:"col-md-1 col-1 d-flex align-items-center"},ts={key:0},es={key:1};Ga.render=function(t,e,a,s,i,l){const d=o("router-link");return n(),r("div",Ka,[c("div",Za,[c("div",Ja,[c(d,{to:{name:"RestaurantsDetails",params:{id:s.state.account.id,yelpId:a.restaurant.yelpId}}},{default:v((()=>[c("b",Qa,g(a.restaurant.name),1)])),_:1},8,["to"])]),c("div",Xa,["favorite"===a.restaurant.tag?(n(),r("span",ts," ⭐ ")):"none"===a.restaurant.tag?(n(),r("span",es)):y("",!0)])])])};var as=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ga});const ss={setup(){const t=e({dropOpen:!1,closedClass:"",openClass:""});return a((()=>{D.myRestaurants.reverse()})),{getSix:function(t){D.sixRests=t;const e=t,a=[];for(let s=0;s<6;s++){const t=e[s];0===a.length?a.push(t):a.find((e=>e.location.city===t.location.city&&e.location.state===t.location.state))||a.push(t),D.locations=a}H.log(D.locations)},state:t,myRests:s((()=>D.myRestaurants.reverse().slice(0,6))),cityRestaurants:s((()=>D.locations)),account:s((()=>D.account)),dropDownToggle(){t.dropOpen=!t.dropOpen}}}},os=w("data-v-d4e03a7a");h("data-v-d4e03a7a");const ns={key:0,class:"col-md-5 col-10 bg-light mt-md-3 mt-4"},rs={class:"my-2 text-center drop-border pb-2"},cs=c("i",{class:"mdi mdi-arrow-down-drop-circle"},null,-1),is={class:"my-2 text-center"},ls=c("i",{class:"mdi mdi-arrow-right-drop-circle"},null,-1);f();const ds=os(((t,e,a,s,l,d)=>{const u=o("CityCard");return n(),r("div",{class:"row justify-content-center mt-md-1 mt-2",onClick:e[2]||(e[2]=(...t)=>s.dropDownToggle&&s.dropDownToggle(...t))},[s.state.dropOpen?(n(),r("div",ns,[c("h5",rs,[b(g(s.account.name)+" ",1),cs]),(n(!0),r(i,null,m(s.cityRestaurants,(t=>(n(),r(u,{key:t.id,cityrestaurant:t},null,8,["cityrestaurant"])))),128))])):(n(),r("div",{key:1,class:"col-md-5 col-10 bg-light mt-md-3 mt-4 shadow",onClick:e[1]||(e[1]=t=>s.getSix(s.myRests))},[c("h5",is,[b(g(s.account.name)+" ",1),ls])]))])}));ss.render=ds,ss.__scopeId="data-v-d4e03a7a";var us=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ss});const ps={props:{loc:{type:Object,required:!0}},setup(t){const a=e({account:s((()=>D.account))});return{state:a,async editCity(e,s){try{s.city=t.loc.city,s.state=t.loc.state;let o=!0;if(1===a.account.location.length&&"remove"===e)z.toast("Cannot remove only city on record","error");else{switch(e){case"add":H.log("You are adding A Location"),o=await W.addCity(s);break;default:return z.toast("Edit city recieved bad action","error"),""}H.log("response value:",o),o?z.toast("Updated City","success"):z.toast("Not a valid city (User cities)","error")}}catch(o){z.toast(o,"error")}}}}};ps.render=function(t,e,a,s,o,c){return s.state.account.activeLocation.city!==a.loc.city?(n(),r("a",{key:0,class:"dropdown-item",onClick:e[1]||(e[1]=t=>s.editCity("add",s.state.account.activeLocation))},g(a.loc.city)+", "+g(a.loc.state),1)):y("",!0)};var gs=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ps});const ms={setup(){const t=e({newVisit:{review:"",favorite:!1}});return{state:t,submitVisit(){console.log("modal logs",t.newVisit),O("#staticBackdrop").modal("hide"),O("body").removeClass("modal-open"),O(".modal-backdrop").remove()},async addToMyRestaurants(){try{Object.keys(D.account.pendingRestaurant)>0&&D.account.pendingRestaurant.exists&&D.account.pendingRestaurant.yelpId===D.activeRestaurant.id&&(D.account.pendingRestaurant.exists=!1,await W.editAccount(D.account));const e=[];t.newVisit.favorite&&e.push("favorite"),console.log(e);const a={myRestaurantId:await It.addNew(D.activeRestaurant,e),review:t.newVisit.review};await At.addNew(a),console.log("modal logs",t.newVisit),O("#staticBackdrop").modal("hide"),O("body").removeClass("modal-open"),O(".modal-backdrop").remove()}catch(e){z.toast(e,"I dunno what happened.")}}}}},ys={class:"modal fade",id:"staticBackdrop","data-backdrop":"static","data-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},vs={class:"modal-dialog"},bs={class:"modal-content"},hs=c("div",{class:"modal-header"},[c("h5",{class:"modal-title",id:"staticBackdropLabel"}," Modal title "),c("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[c("span",{"aria-hidden":"true"},"×")])],-1),fs={class:"modal-body"},ws={class:"form-group"},_s=c("label",{for:"review"},"Review",-1),Rs={class:"input-group-checkbox"},ks=b(" Favorite: "),xs=c("div",{class:"modal-footer"},[c("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Close "),c("button",{type:"submit",class:"btn btn-primary"}," Submit ")],-1);ms.render=function(t,e,a,s,o,i){return n(),r("div",ys,[c("div",vs,[c("form",{onSubmit:e[3]||(e[3]=L(((...t)=>s.addToMyRestaurants&&s.addToMyRestaurants(...t)),["prevent"]))},[c("div",bs,[hs,c("div",fs,[c("div",ws,[_s,A(c("input",{type:"text",class:"form-control",id:"review","aria-describedby":"review",placeholder:"Tell us about your visit...","onUpdate:modelValue":e[1]||(e[1]=t=>s.state.newVisit.review=t)},null,512),[[I,s.state.newVisit.review]]),c("div",Rs,[ks,A(c("input",{type:"checkbox","aria-label":"Favorite","onUpdate:modelValue":e[2]||(e[2]=t=>s.state.newVisit.favorite=t)},null,512),[[P,s.state.newVisit.favorite]])])])]),xs])],32)])])};var Ss=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ms});const Cs=E(B);!function(t){const e={"./components/BRGbuttons.vue":et,"./components/CityCard.vue":ct,"./components/FeedRestaurantCard.vue":pt,"./components/LoadingSpinner.vue":ht,"./components/LocationCard.vue":Lt,"./components/MyInfoCard.vue":$t,"./components/NavbarDesktopBottom.vue":Jt,"./components/NavbarDesktopTop.vue":Ae,"./components/NavbarMobileBottom.vue":Ue,"./components/NavbarMobileTop.vue":pa,"./components/RestaurantDetailsCard.vue":Va,"./components/RestaurantSearchShort.vue":Wa,"./components/RestaurantShortCard.vue":as,"./components/TopSixCard.vue":us,"./components/UserCities.vue":gs,"./components/VisitModal.vue":Ss};Object.entries(e).forEach((([e,a])=>{const s=a.name||e.substr(e.lastIndexOf("/")+1).replace(/\.\w+$/,"");t.component(s,a.default)}))}(Cs),Cs.use(se).mount("#app");export{D as A,z as P,W as a,ue as b,U as c,H as l,Y as y};
